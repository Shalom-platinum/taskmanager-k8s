# Default values for taskmanager
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# Global settings
global:
  imageRegistry: ""
  imagePullSecrets: []

# MongoDB configuration
mongodb:
  enabled: true
  replicaCount: 1
  image:
    repository: mongo
    tag: "7"
    pullPolicy: IfNotPresent
  
  service:
    type: ClusterIP
    port: 27017
  
  persistence:
    enabled: true
    storageClass: ""
    accessMode: ReadWriteOnce
    size: 1Gi
  
  resources:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  
  # MongoDB database name
  database: taskmanager

# Backend configuration
backend:
  enabled: true
  replicaCount: 2
  
  image:
    repository: taskmanager-backend
    tag: "latest"
    pullPolicy: Never  # Change to Always for production with registry
  
  service:
    type: ClusterIP
    port: 5000
  
  env:
    nodeEnv: production
    port: 5000
    logLevel: info
  
  # MongoDB connection
  mongodb:
    host: mongodb-service
    port: 27017
    database: taskmanager
  
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"
  
  # Health checks
  livenessProbe:
    enabled: true
    path: /health
    initialDelaySeconds: 60
    periodSeconds: 10
    failureThreshold: 3
  
  readinessProbe:
    enabled: true
    path: /health
    initialDelaySeconds: 30
    periodSeconds: 5
    failureThreshold: 3
  
  # Autoscaling
  autoscaling:
    enabled: false
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

# Frontend configuration
frontend:
  enabled: true
  replicaCount: 2
  
  image:
    repository: taskmanager-frontend
    tag: "latest"
    pullPolicy: Never  # Change to Always for production with registry
  
  service:
    type: LoadBalancer
    port: 80
  
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "100m"
  
  # Autoscaling
  autoscaling:
    enabled: false
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 70

# Ingress configuration
ingress:
  enabled: true
  className: "nginx"
  annotations:
    kubernetes.io/ingress.class: nginx
    # nginx.ingress.kubernetes.io/rewrite-target: /
  
  hosts:
    - host: taskmanager.local
      paths:
        - path: /
          pathType: Prefix
          backend: frontend
  
  tls: []
  # - secretName: taskmanager-tls
  #   hosts:
  #     - taskmanager.local

# ConfigMap settings
config:
  create: true

# Environment-specific overrides
# Can be overridden with --values flag
environment: development